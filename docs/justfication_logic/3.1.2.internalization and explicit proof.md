
### 3.1.2 内化定理
**Lemma 3.1**  For any formula $F$ there are proof polynomials $f_F(x)$ such that $\text{hybrid-}\mathbf{LPS4}$ proves $x:F\rightarrow f_F(x):\Box F$, where $f_F(x)=t!x$ with $t:(x:F\rightarrow\Box F)$.
**Proof.** $$\begin{align*}
    &(1)\ t:(x:F\rightarrow\Box F)\quad \text{connection}\\
    &(2)\ x:F\rightarrow !x:x:F\quad \text{explicit positive introspection}\\
    &(3)\ !x:x:F\rightarrow t!x:\Box F\quad application\\
    &(4)\ x:F\rightarrow t!x:\Box F
\end{align*}$$

**Lemma 3.2**  For any formula $F$ and any nominal $i$, there are proof polynomials $\mathbf{po}_F^i(x)$ and $\mathbf{ne}_F^i(x)$ such that $\text{hybrid-}\mathbf{LPS4}$ proves $@_ix:F\rightarrow \mathbf{po}_F^i(x):@_iF$ and $@_ix:\neg F\rightarrow \mathbf{ne}_F^i(x):@_i\neg F$, where $\mathbf{po}_F^i(x) = dc!_ix$ with $d:(@_i(x:F\rightarrow F)\rightarrow(@_ix:F\rightarrow @_iF)), c:@_i(x:F\rightarrow F)$ and $\mathbf{ne}_F^i(x) = d'c'?_ix$ with $d':(@_i(x:\neg F\rightarrow \neg F)\rightarrow(@_ix:\neg F\rightarrow @_i\neg F)), c':@_i(x:\neg F\rightarrow \neg F)$.
**Proof.** $$\begin{align*}
    &(1)\ @_ix:F\rightarrow !_ix:@_ix:F\quad \text{remote positive justification checker}\\
    &(2)\ c:@_i(x:F\rightarrow F)\quad \text{Factivity}\\
    &(3)\ d:(@_i(x:F\rightarrow F)\rightarrow(@_ix:F\rightarrow @_iF))\quad K_@\\
    &(4)\ dc:(@_ix:F\rightarrow @_iF)\quad 2,3,application\\
    &(5)\ !_ix:@_ix:F\rightarrow dc!_ix:@_iF\quad 1,4,application\\
    &(6)\ @_ix:F\rightarrow dc!_ix:@_iF
\end{align*}$$
<!-- **Proof.** $$\begin{align*}
    &(1)\ @_ix:\neg F\rightarrow ?_ix:@_ix:\neg F\quad \text{remote negetive justification checker}\\
    &(2)\ c:@_i(x:\neg F\rightarrow \neg F)\quad \text{Factivity}\\
    &(3)\ d:(@_i(x:F\rightarrow F)\rightarrow(@_ix:F\rightarrow @_iF))\quad K_@\\
    &(4)\ dc:(@_ix:F\rightarrow @_iF)\quad 2,3,application\\
    &(5)\ !_ix:@_ix:F\rightarrow dc!_ix:@_iF\quad 1,4,application\\
    &(6)\ @_ix:F\rightarrow dc!_ix:@_iF
\end{align*}$$ -->

**Theorem 3.3** (Internalization) If $F$ is a theorem of $\text{hybrid-}\mathbf{LPS4}$, then there is a closed justification term $t$ such that $t:F$ is also a theorem.
**Proof.** Let $F_1,F_2,\cdots,F_n = F$ be the proof of $F$ in the $\text{hybrid-}\mathbf{LPS4}$. We induction on $k$ to show that for each $k\le n$ there is some closed justification term $t_k$ such that $t_k:F_k$ is provable. Assume that the result is hold for all $m\le k$, we show it holds for $k$ as well. There are several cases to consider.
**Case:Axiom** Suppose that $F_k$ is an axiom, then use constant specification rule, $c:F_k$ is provable for any constant $c$.
**Case:Modus Ponens** Suppose that $F_k$ is obtained from $F_{m}$ and $F_{n} = F_m\rightarrow F_k$ by modus ponens. Then by induction hypothesis there are closed justification terms $t_{m}$ and $t_{n}$ such that $t_{m}:F_{m}$ and $t_{n}:F_{n}$ are provable. Then using the $\cdot$ axiom and modus ponens, $t_nt_m:F_k$ is also provable.
**Case:Necessitation** Suppose that $F_k = \Box F_m$ is obtained from $F_{m}$ by necessitation. Then by induction hypothesis there is a closed justification term $t_{m}$ such that $t_{m}:F_{m}$ is provable. Using Lemma 3.1, there are closed justification terms $f_{F_m}(t_m)$ such that $f_{F_m}(t_m):\Box F_m$ is provable. 
**Case:@Necessitation** Suppose that $F_k = @_iF_m$ is obtained from $F_{m}$ by @necessitation. Then by induction hypothesis there is a closed justification term $t_{m}$ such that $t_{m}:F_{m}$ is provable. By @necessitation, for any nominal $i$, $@_it_m:F_m$ is provable. Using Lemma 3.2, there are closed justification terms $\mathbf{po}_{F_m}^i(t_m)$ such that $\mathbf{po}_{F_m}^i(t_m):@_iF_m$ is provable or $\mathbf{ne}_{F_m}^i(t_m)$ such that $\mathbf{ne}_{F_m}^i(t_m):@_iF_m$ is provable.
**Csae:Iterated Axiom Necessitation** Suppose that $F_k = c_1:c_2:\cdots:c_n:M$ where $M$ is an axiom. Then by iterated axiom necessitation, we also have $c_0:c_1:c_2:\cdots:c_n:M$ is provable for any constant $c_0$, thus $c_0:F_k$.
**Csae:Iterated Remote Axiom Necessitation** Similar to the previous case.

**Corollary 3.4** (explicit proof) If $\Box F$ is a theorem of $\text{hybrid-}\mathbf{LPS4}$, then there is a closed justification term $t$ such that $t:F$ is also a theorem.
**Proof.** Suppose that $\Box F$ is a theorem of $\text{hybrid-}\mathbf{LPS4}$. Let $t:\Box F$ is a theorem according to internalization theorem and let $c:(\Box F\rightarrow F)$ by $T$ axiom，then $ct:F$ is also a theorem by $application$ axiom $c:(\Box F\rightarrow F)\rightarrow(t:\Box F\rightarrow ct:F)$.


<!-- 
Lemma. For every formula $F$ and for every nominal $i$, If there are closed justification term $c$ and $d$ shch that both $@_iF\rightarrow @_ic:F, @_i\neg F\rightarrow @_id:\neg F$ are provable, then there are closed justification term $t$ and $u$ such that both $@_iF\rightarrow t:@_iF$ and $@_i\neg F\rightarrow u:@_i\neg F$ are provable in $\text{hybrid-}\mathbf{LPS4}$.
**Proof.** By induction on the complexity of $F$, defined as the number of connectives, $@$symbols, and $t:$ occurrences in $F$.
**Case** $F$ is propositional atomic. immediately follows from the $\text{remote fact checker}$ Axioms.
**Case** $F$ is $M\rightarrow N$
**Case** $F$ is $\neg(M\rightarrow N)$
**Case** $F$ is $\Box X$
By induction on the complexity of $X$
**subcase** $X$ is propositional letter.
$$\begin{align*}
    &(1)\ \Box X\rightarrow X\quad T\\
    &(2)\ @_i(\Box X\rightarrow X)\rightarrow(@_i\Box X\rightarrow @_iX)\quad K_@\\
    &(3)\ @_i\Box X\rightarrow @_iX\quad 1,2,MP\\
    &(4)\ @_iX\rightarrow f_i:@_iX\quad \text{remote fact checker}\\
    &(5)\ c:(@_iX\rightarrow @_if_i:X)\quad \text{close fact checker}\\
    &(6)\ c:(@_iX\rightarrow @_if_i:X)\rightarrow(f_i:@_iX\rightarrow cf_i:@_if_i:X)\quad application\\
    &(7)\ f_i:@_iX\rightarrow cf_i:@_if_i:X\quad 5,6,MP\\
    &(8)\ d:@_i(f_i:X\rightarrow\Box X)\quad \text{connection}\\
    &(9)\ e:@_i(f_i:X\rightarrow\Box X)\rightarrow(@_if_i:X\rightarrow @_i\Box X)\quad K_@\\ 
    &(10)\ ed:(@_if_i:X\rightarrow @_i\Box X)\quad 8,9,application\\
    &(11)\ cf_i:@_if_i:X\rightarrow ed(cf_i):@_i\Box X\quad 10,application\\ 
    &(12)\ @_i\Box X\rightarrow ed(cf_i):@_i\Box X\quad 3,4,7,11\\
\end{align*}$$
**subcase** $X$ is $M\rightarrow N$.
$$\begin{align*}
    % &(1)\ @_i\Box(M\rightarrow N)\rightarrow @_i\Box(\neg M\lor N)\quad TAUT\\
    &(1)\ c:(\neg M\rightarrow(M\rightarrow N))\quad TAUT\\
    % &(1)\ c:(\neg M\rightarrow(M\rightarrow N))\rightarrow(d:\neg M\rightarrow cd:(M\rightarrow N))\quad application\\
    &()\ @_ic:(\neg M\rightarrow(M\rightarrow N))\quad @NEC\\
    &()\ !_ic:@_ic:(\neg M\rightarrow(M\rightarrow N))\quad \text{remote positive justification checker}\\ 
    &(2)\ d:\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\quad\text{connection}\\ 
    &(2)\ @_id:\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\quad @NEC\\ 
    &(2)\ !_id:@_id:\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\quad\\ 
    &(2)\ e:\Big(@_id:\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\rightarrow\\
    &\qquad @_i\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\Big)\\
    &()\ h:\Big(@_i\big(c:(\neg M\rightarrow(M\rightarrow N))\rightarrow \Box(\neg M\rightarrow(M\rightarrow N))\big)\rightarrow\\
    &\qquad \big(@_ic:(\neg M\rightarrow(M\rightarrow N))\rightarrow @_i\Box(\neg M\rightarrow(M\rightarrow N))\big)\Big)\quad K_@\\
    &()\ h(e!_id):\big(@_ic:(\neg M\rightarrow(M\rightarrow N))\rightarrow @_i\Box(\neg M\rightarrow(M\rightarrow N))\big)\\
    &()\ h(e!_id)!_ic:@_i\Box(\neg M\rightarrow(M\rightarrow N))\quad\\
    % &()\ \Box(\neg M\rightarrow(M\rightarrow N))\rightarrow(\Box\neg M\rightarrow\Box(M\rightarrow N))\quad K\\
    &()\ k:@_i\big(\Box(\neg M\rightarrow(M\rightarrow N))\rightarrow(\Box\neg M\rightarrow\Box(M\rightarrow N))\big)\quad @NEC\\
    &()\ l:\Big(@_i\big(\Box(\neg M\rightarrow(M\rightarrow N))\rightarrow(\Box\neg M\rightarrow\Box(M\rightarrow N))\big)\rightarrow\\
    &\qquad \big(@_i\Box(\neg M\rightarrow(M\rightarrow N))\rightarrow @_i(\Box\neg M\rightarrow\Box(M\rightarrow N))\big)\Big)\quad K_@\\
    &()\ lk:\big(@_i\Box(\neg M\rightarrow(M\rightarrow N))\rightarrow @_i(\Box\neg M\rightarrow\Box(M\rightarrow N))\big)\quad \\
    &()\ m:\big(@_i(\Box\neg M\rightarrow\Box(M\rightarrow N))\rightarrow(@_i\Box\neg M\rightarrow @_i\Box(M\rightarrow N))\big)\quad K_@\\
    &(3)\ m(lk(h(e!_id)!_ic)):(@_i\Box\neg M\rightarrow @_i\Box(M\rightarrow N))\\
    &()\ @_i\Box\neg M\rightarrow u:@_i\Box\neg M\quad I.H.\\
    &()\ @_i\Box\neg M\rightarrow m(lk(h(e!_id)!_ic))u:@_i\Box(M\rightarrow N)\quad I.H.
\end{align*}$$
By I.N. let $@_i\Box\neg M\rightarrow u:@_i\Box\neg M,@_i\Box N\rightarrow v:@_i\Box N$


书写证明发现，正着想根本找不到思路，直觉也没法直接到达结果。反着想非常的重要。这从一般的公理系统证明就能感觉到。

复杂的原因在于不能用前置条件 -->
