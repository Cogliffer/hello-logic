
## 外部证明(remote)

### Example B.1
一个外部证明的例子。如果$P$在$\Gamma$中，那么对于任意公式$F$，可证$F\rightarrow P$在$\Gamma$上为真。Let $\mathcal{V}(i)=\Gamma$, we try to proof $@_iP\rightarrow\Box @_i(F\rightarrow P)$ is a theorem. 由$dual-back$公理易证。现在用项给出具体的证明。$@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P)$ where $d:(@_i(P\rightarrow(F\rightarrow P))\rightarrow(@_iP\rightarrow @_i(F\rightarrow P))), c:@_i(P\rightarrow(F\rightarrow P)), f_i:@_iP$.
**Proof.**
$$\begin{align*}
    &(1)\ @_iP\rightarrow f_i:@_iP\quad \text{remote fact checker}\\
    &(2)\ P\rightarrow(F\rightarrow P)\quad TAUT\\
    &(3)\ @_i(P\rightarrow(F\rightarrow P))\quad @NEC\\
    &(4)\ c:@_i(P\rightarrow(F\rightarrow P))\quad 3,\text{Iterated remote axiom necessitation}\\
    &(5)\ @_i(P\rightarrow(F\rightarrow P))\rightarrow(@_iP\rightarrow @_i(F\rightarrow P))\quad K_@\\
    &(6)\ d:(@_i(P\rightarrow(F\rightarrow P))\rightarrow(@_iP\rightarrow @_i(F\rightarrow P)))\quad 5,\text{Iterated axiom necessitation}\\
    &(7)\ d:(@_i(P\rightarrow(F\rightarrow P))\rightarrow(@_iP\rightarrow @_i(F\rightarrow P)))\rightarrow\\
    &\qquad (c:@_i(P\rightarrow(F\rightarrow P))\rightarrow(d\cdot c):(@_iP\rightarrow @_i(F\rightarrow P)))\quad application\\
    &(8)\ c:@_i(P\rightarrow(F\rightarrow P))\rightarrow(d\cdot c):(@_iP\rightarrow @_i(F\rightarrow P))\quad 6,7,MP\\
    &(9)\ (d\cdot c):(@_iP\rightarrow @_i(F\rightarrow P))\quad 4,8,MP\\
    &(10)\ (d\cdot c):(@_iP\rightarrow @_i(F\rightarrow P))\rightarrow\\
    &\qquad (f_i:@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P))\quad application\\
    &(11)\ f_i:@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P)\quad 9,10,MP\\
    &(12)\ (@_iP\rightarrow f_i:@_iP)\rightarrow\\
    &\qquad ((f_i:@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P))\rightarrow(@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P)))\quad TAUT\\
    &(13)\ (f_i:@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P))\rightarrow(@_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P))\quad 1,12,MP\\
    &(14)\ @_iP\rightarrow(d\cdot c\cdot f_i):@_i(F\rightarrow P)\quad 11,13,MP
\end{align*}$$



下层公式的上层对应，


含有下层逻辑的例子
$$\begin{align*}
    P::=p\ |\ \hat{\neg} P\ |\ P\hat{\rightarrow} P\ |\ \hat{\Box} P\\
\end{align*}$$

如果下层公式$P$在$\Gamma$中，那么对于任意的下层公式$Q$，在$\Gamma$中可证$Q\hat{\rightarrow}P$。Let $\mathcal{V}(i)=\Gamma$, we try to proof $@_iP\rightarrow @_i\Box(Q\hat{\rightarrow} P)$ is a theorem.
**Proof.**
$$\begin{align*}
    &(1)\ P\rightarrow\Box P\quad \text{fact checker}\\
    &(2)\ P\hat{\rightarrow}(Q\hat{\rightarrow} P)\quad TAUT\\
    &(3)\ (P\hat{\rightarrow}(Q\hat{\rightarrow} P))\rightarrow(P\rightarrow(Q\hat{\rightarrow} P))\quad 3,\\
    &(4)\ P\rightarrow(Q\hat{\rightarrow} P)\quad 2,3,MP\\
    &(5)\ \Box P\rightarrow \Box(Q\hat{\rightarrow} P)\quad 4,NEC,K\\
    &(6)\ P\rightarrow\Box(Q\hat{\rightarrow} P)\quad 1,5\\
    &(7)\ @_iP\rightarrow @_i\Box(Q\hat{\rightarrow} P)\quad 6,@NEC,K_@
\end{align*}$$

如果下层公式$P$在$\Gamma$中，那么对于任意的下层公式$Q$，可证$Q\hat{\rightarrow}P$在$\Gamma$中。Let $\mathcal{V}(i)=\Gamma$, we try to proof $@_iP\rightarrow \Box @_i(Q\hat{\rightarrow} P)$ is a theorem.
**Proof.**
$$\begin{align*}
    &(1)\ @_iP\rightarrow\Box @_iP\quad dual-back\\
    &(2)\ P\hat{\rightarrow}(Q\hat{\rightarrow} P)\quad TAUT\\
    &(3)\ (P\hat{\rightarrow}(Q\hat{\rightarrow} P))\rightarrow(P\rightarrow(Q\hat{\rightarrow} P))\quad 3,\\
    &(4)\ P\rightarrow(Q\hat{\rightarrow} P)\quad 2,3,MP\\
    &(5)\ @_iP\rightarrow @_i(Q\hat{\rightarrow} P)\quad 4,@NEC,K_@\\
    &(6)\ \Box @_iP\rightarrow \Box @_i(Q\hat{\rightarrow} P)\quad 5,NEC,K\\
    &(7)\ @_iP\rightarrow \Box @_i(Q\hat{\rightarrow} P)\quad 1,6
\end{align*}$$

下层逻辑$\mathbf{LPGL}$：
$u::= c\ |\ x\ |\ (u\cdot u)\ |\ (u+u)\ |\ !u$
$P::= p\ |\ \neg P\ |\ P\rightarrow P\ |\ \Box P\ |\ u:P$
上层逻辑$\text{hybrid-}\mathbf{S4_f}$：
$F::= i\ |\ P\ |\ \hat{\neg} F\ |\ F\hat{\rightarrow} F\ |\ \hat{\Box} F\ |\ @_i F$
补充公理：$\neg P\rightarrow\hat{\neg} P,(P\rightarrow Q)\hat{\rightarrow}(P\hat{\rightarrow} Q)$
$\textbf{Theorem. } \mathcal{M}\vDash @_\mathbf{LPGL}(u:\Box P\rightarrow P) $
**Proof.** Let $@_i$ be $@_\mathbf{LPGL}$
$$\begin{align}
    &(1)\ @_i(u:\Box P\rightarrow\Box P) \quad Factivity\ on\ \mathbf{LPGL}\\
    &(2)\ @_i((u:\Box P\rightarrow\Box P)\rightarrow(\neg\Box P\rightarrow\neg u:\Box P)) \quad TAUT \ on\ \mathbf{LPGL}\\
    &(3)\ @_i((u:\Box P\rightarrow\Box P)\hat{\rightarrow}(\neg\Box P\rightarrow\neg u:\Box P))\quad 2\\
    &(4)\ @_i(u:\Box P\rightarrow\Box P)\hat{\rightarrow}@_i(\neg\Box P\rightarrow\neg u:\Box P)\quad 3,K_@\\
    &(5)\ @_i(\neg\Box P\rightarrow\neg u:\Box P)\quad 1,4,MP\\
    &(6)\ @_i(\neg u:\Box P\rightarrow\Box(\neg u:\Box P)) \quad \text{weak negative introspection} \ on\ \mathbf{LPGL}\\ 
    &(7)\ @_i(\neg u:\Box P\rightarrow(u:\Box P\rightarrow P)) \quad TAUT \ on\ \mathbf{LPGL} \\
    &(8)\ @_i(\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P)) \quad 7,NEC,K \ on\ \mathbf{LPGL}\\ 
    &(9)\ @_i\bigg((\neg\Box P\rightarrow\neg u:\Box P)\rightarrow\Big((\neg u:\Box P\rightarrow\Box(\neg u:\Box P))\rightarrow\notag\\
    &\qquad\big((\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\big)\Big)\bigg)\quad TAUT \ on\ \mathbf{LPGL} \\
    &(10)\ @_i\bigg((\neg\Box P\rightarrow\neg u:\Box P)\hat{\rightarrow}\Big((\neg u:\Box P\rightarrow\Box(\neg u:\Box P))\hat{\rightarrow}\notag\\
    &\qquad\big((\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\big)\Big)\bigg)\quad 9 \\
    &(11)\ @_i(\neg\Box P\rightarrow\neg u:\Box P)\hat{\rightarrow}\Big(@_i(\neg u:\Box P\rightarrow\Box(\neg u:\Box P))\hat{\rightarrow}\notag\\
    &\qquad\big(@_i(\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}@_i(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\big)\Big)\quad 10,@NEC,K_@ \\
    &(12)\ @_i(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\quad 5,6,8,11,MP\\
    &(13)\ @_i(P\rightarrow(u:\Box P\rightarrow P))\quad TAUT \ on\ \mathbf{LPGL} \\
    &(14)\ @_i(\Box P\rightarrow\Box(u:\Box P\rightarrow P))\quad 13,NEC,K\ on\ \mathbf{LPGL} \\
    &(15)\ @_i\Big((\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\big((\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\Box(u:\Box P\rightarrow P)\big)\Big) TAUT \ on\ \mathbf{LPGL} \\
    &(16)\ @_i\Big((\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}\big((\Box P\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}\Box(u:\Box P\rightarrow P)\big)\Big) \quad 15 \\
    &(17)\ @_i(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}\big(@_i(\Box P\rightarrow\Box(u:\Box P\rightarrow P))\hat{\rightarrow}@_i\Box(u:\Box P\rightarrow P)\big) \quad 16,K_@ \\ 
    &(18)\ @_i\Box(u:\Box P\rightarrow P)\quad 12,14,17,MP\\
    &(19)\ @_i(u:\Box P\rightarrow P)\quad \text{reflexivity rule}\ on\ \mathbf{LPGL}
\end{align}$$

我们没法使用下层逻辑的规则，但是公理可以用，规则被外化到主语言中了，用term上的函数表示


用term内化了模型中系统的可证的公式的具体的证明过程，这是有趣的。因为term提供了一种证明的核心直觉，非常的简洁，清晰的刻画了证明的关键步骤。
term不仅能够内化外部证明，也能在给出下层系统之后，内化内部证明
成为可以用的推理规则


下层逻辑$\mathbf{LPGL}$：
$u::= c\ |\ x\ |\ (u\cdot u)\ |\ (u+u)\ |\ !u$
$P::= p\ |\ \neg P\ |\ P\rightarrow P\ |\ \Box P\ |\ u:P$
上层逻辑$\text{hybrid-}\mathbf{LPS4_f}$：
$t::= c\ |\ x\ |\ t\cdot t\ |\ t+t\ |\ !t\ |\ !_it\ |\ ?_it\ |\ f_{nec}(t)\ |\ f_r(t)$
$F::= i\ |\ P\ |\ \hat{\neg} F\ |\ F\hat{\rightarrow} F\ |\ \hat{\Box} F\ |\ @_i F\ |\ \hat{t}:F$
函数：
$ f_{nec}(t)$ 对应$\mathbf{LPGL}$中的$NEC$规则；
$ f_{r}(t)$ 对应$\mathbf{LPGL}$中的$\text{reflexivity rule}$规则；
$ f_{k}(t)$ 对应$\mathbf{LPGL}$中的$K_@$规则；
并使用函数$ g_{nec}(t)$,$ g_{k}(t)$简化证明过程：
$ g_{k}(t)$ 对应$\text{hybrid-}\mathbf{LPS4_f}$中的$K_@$规则；
**Proof.** Let $@_i$ be $@_\mathbf{LPGL}$
$$\begin{align}
    &(1)\ c:@_i(u:\Box P\rightarrow\Box P) \quad Factivity\ on\ \mathbf{LPGL}\\
    &(2)\ d:@_i((u:\Box P\rightarrow\Box P)\rightarrow(\neg\Box P\rightarrow\neg u:\Box P)) \quad TAUT \ on\ \mathbf{LPGL}\\
    &(3)\ g_k(d): @_i(u:\Box P\rightarrow\Box P)\hat{\rightarrow}@_i(\neg\Box P\rightarrow\neg u:\Box P)\quad \\
    &(4)\ g_k(d)c:@_i(\neg\Box P\rightarrow\neg u:\Box P)\quad 3,1,Application\\
    &(5)\ h:@_i(\neg u:\Box P\rightarrow\Box(\neg u:\Box P)) \quad \text{weak negative introspection} \ on\ \mathbf{LPGL}\\ 
    &(6)\ j:@_i(\neg u:\Box P\rightarrow(u:\Box P\rightarrow P)) \quad TAUT \ on\ \mathbf{LPGL} \\
    &(7)\ f_{nec}(j):@_i\Box(\neg u:\Box P\rightarrow(u:\Box P\rightarrow P))\quad NEC \ on\ \mathbf{LPGL}\\
    &(8)\ f_kf_{nec}(j):@_i(\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P)) \quad\\ 
    &(9)\ m:@_i\bigg((\neg\Box P\rightarrow\neg u:\Box P)\rightarrow\Big((\neg u:\Box P\rightarrow\Box(\neg u:\Box P))\rightarrow\notag\\
    &\qquad\big((\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\big)\Big)\bigg)\quad TAUT \ on\ \mathbf{LPGL} \\
    &(10)\ g_k\Big(g_k\big(g_k(m)(g_k(d)c)\big)h\Big)f_kf_{nec}(j):@_i(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\quad 9,5,6,8,Application\\
    &(11)\ n:@_i(P\rightarrow(u:\Box P\rightarrow P))\quad TAUT \ on\ \mathbf{LPGL} \\
    &(12)\ o:@_i\Big((\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\big((\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\Box(u:\Box P\rightarrow P)\big)\Big) TAUT \ on\ \mathbf{LPGL} \\
    &(13)\ g_k\bigg(g_k(o)\Big(g_k\Big(g_k\big(g_k(m)(g_k(d)c)\big)h\Big)f_kf_{nec}(j)\Big)\bigg)f_kf_{nec}(n):@_i\Box(u:\Box P\rightarrow P)\quad 12,10,11,MP\\
    &(14)\ f_r\bigg(g_k\bigg(g_k(o)\Big(g_k\Big(g_k\big(g_k(m)(g_k(d)c)\big)h\Big)f_kf_{nec}(j)\Big)\bigg)f_kf_{nec}(n)\bigg):@_i(u:\Box P\rightarrow P)\quad 13,\text{reflexivity rule}\ on\ \mathbf{LPGL}
\end{align}$$
$$\begin{align}
    &(1)\ c:(u:\Box P\rightarrow\Box P) \quad Factivity \\
    &(2)\ d:((u:\Box P\rightarrow\Box P)\rightarrow(\neg\Box P\rightarrow\neg u:\Box P)) \quad TAUT  \\
    &(4)\ dc:(\neg\Box P\rightarrow\neg u:\Box P)\quad 3,1,Application\\
    &(5)\ h:(\neg u:\Box P\rightarrow\Box(\neg u:\Box P)) \quad \text{weak negative introspection}  \\ 
    &(6)\ j:(\neg u:\Box P\rightarrow(u:\Box P\rightarrow P)) \quad TAUT   \\
    &(7)\ f_{nec}(j):\Box(\neg u:\Box P\rightarrow(u:\Box P\rightarrow P))\quad NEC  \\
    &(8)\ f_kf_{nec}(j):(\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P)) \quad\\ 
    &(9)\ m:\bigg((\neg\Box P\rightarrow\neg u:\Box P)\rightarrow\Big((\neg u:\Box P\rightarrow\Box(\neg u:\Box P))\rightarrow\notag\\
    &\qquad\big((\Box(\neg u:\Box P)\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\big)\Big)\bigg)\quad TAUT   \\
    &(10)\ m(dc)h(f_kf_{nec}(j)):(\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\quad 9,5,6,8,Application\\
    &(11)\ n:(P\rightarrow(u:\Box P\rightarrow P))\quad TAUT   \\
    &(12)\ o:\Big((\neg\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\big((\Box P\rightarrow\Box(u:\Box P\rightarrow P))\rightarrow\Box(u:\Box P\rightarrow P)\big)\Big) TAUT   \\
    &(13)\ o\big(m(dc)h(f_kf_{nec}(j))\big)(f_kf_{nec}(j)):\Box(u:\Box P\rightarrow P)\quad 12,10,11,MP\\
    &(14)\ f_r\Big(o\big(m(dc)h(f_kf_{nec}(j))\big)(f_kf_{nec}(j))\Big):@_i(u:\Box P\rightarrow P)\quad 13,\text{reflexivity rule} 
\end{align}$$

这个例子体现出混合算子的必要性。让系统中的定理转化为公理系统中的定理。从而能够公理化方法推理。